<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="shortcut icon" type="imagex/png" href="img/logo_polybalas.ico">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <title>POLYBALAS</title>
</head>

<body>
    <header>
        <nav class="dp-menu">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="form_roteiro.html">Roteirização</a></li>
                <li><a href="form_agenda.html">Agendas Supervisores</a></li>
                <li><a href="form_vendedor_solicitacao.html">Modificação de Vendedores</a></li>
            </ul>
        </nav>
    </header>
    <div class="contenedor-formulario">
        <div class="wrap">
            <form action="https://api.sheetmonkey.io/form/3VptRN5u4U8WGANoyuvL7Y" class="formulario" id="formulario_registro" name="formulario_registro" method="post">
                <div>

                    <div class="input-group">
                        <label for="nomeGerente">Gerente:</label>
                        <input type="text" id="Nome do Gerente" name="Nome Gerente" class="uppercase-input"
                            minlength="5" maxlength="50" required
                            oninput="this.value = this.value.toUpperCase()">
                    </div>

                    <div class="input-group">
                        <label for="nomeSupervisor">Supervisor:</label>
                        <input type="text" id="nomeSupervisor" name="nomeSupervisor" class="uppercase-input"
                            minlength="5" maxlength="50" required
                            oninput="this.value = this.value.toUpperCase()">
                    </div>

                    <div class="input-group">
                        <label for="rotaVendedor">Rota:</label>
                        <input type="text" id="rotaVendedor" name="rotaVendedor" minlength="5" maxlength="5" required
                        oninput="formatarRota(this)">
                    </div>
                    <script>
                        function formatarRota(input) {
                            // Transforma todo o texto em maiúsculas
                            input.value = input.value.toUpperCase();

                            // Garante que o campo tenha no máximo 5 caracteres
                            if (input.value.length > 5) {
                                input.value = input.value.substring(0, 5);
                            }

                            // Insere o hífen após as duas primeiras letras
                            if (input.value.length == 2 && input.value.charAt(2) !== '-') {
                                input.value = input.value.substring(0, 2) + '-' + input.value.substring(2);
                            }
                        }
                    </script>
                    <div class="input-group">
                        <label for="codigo">Código:</label>
                        <input type="number" id="codigo" name="codigo" min="1" max="999999" required>
                    </div>

                    <div class="input-group">
                        <label for="vendorSubstituido">Nome Do Vendedor:</label>
                        <input type="text" id="vendorSubstituido" name="vendorSubstituido" class="uppercase-input"
                            minlength="5" maxlength="50" required
                            oninput="this.value = this.value.toUpperCase()">
                    </div>

                    <h3 align="center">Dados Do Novo Vendedor</h3><br><br>
                    <div class="input-group">
                        <label for="nomeCompleto">Nome Completo:</label>
                        <input type="text" id="nomeCompleto" name="nomeCompleto" class="uppercase-input"
                            minlength="5" maxlength="50" required
                            oninput="this.value = this.value.toUpperCase()">
                    </div>

                    <div class="input-group">
                        <label for="dataNascimento">Data de Nascimento:</label>
                        <input type="date" id="dataNascimento" name="dataNascimento" required>
                    </div>

                    <div class="input-group">
                        <label for="cpf">CPF:</label>
                        <input type="text" id="cpf" name="cpf" pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" minlength="14"
                            maxlength="14" required oninput="formatarCPF(this)" onkeypress="return onlyNumbers(event)">
                    </div>
                    <script>
                        function formatarCPF(input) {
                            // Format CPF as 999.999.999-99
                            let unformatted = input.value.replace(/[^\d]/g, '');
                            if (unformatted.length === 11) {
                                input.value = `${unformatted.substring(0, 3)}.${unformatted.substring(3, 6)}.${unformatted.substring(6, 9)}-${unformatted.substring(9)}`;
                            }
                        }

                        function onlyNumbers(event) {
                            // Permite apenas a entrada de caracteres numéricos
                            const keyCode = event.which || event.keyCode;
                            const isNumeric = (keyCode >= 48 && keyCode <= 57) || (keyCode >= 96 && keyCode <= 105);
                            return isNumeric;
                        }
                    </script>

                    <div class="input-group">
                        <label for="rg">RG:</label>
                        <input type="text" id="rg" name="rg"minlength="9"
                            maxlength="9" required>
                    </div>

                    <div class="input-group">
                        <label for="endereco">Endereço:</label>
                        <input type="text" id="endereco" name="endereco" class="uppercase-input"
                            minlength="5" maxlength="50" required
                            oninput="this.value = this.value.toUpperCase()">
                    </div>

                    <div class="input-group">
                        <label for="bairro">Bairro:</label>
                        <input type="text" id="bairro" name="bairro" class="uppercase-input"
                            minlength="5" maxlength="50" required
                            oninput="this.value = this.value.toUpperCase()">
                    </div>

                    <div class="input-group">
                        <label for="cidade">Cidade:</label>
                        <input type="text" id="cidade" name="cidade" class="uppercase-input"
                            minlength="5" maxlength="50" required
                            oninput="this.value = this.value.toUpperCase()">
                    </div>

                    <div class="input-group">
                        <label for="telefone">Telefone:</label>
                        <input type="tel" id="telefone" name="telefone" placeholder="(99) 9 9999-9999" minlength="11" maxlength="11" required
                        oninput="formatarTelefone(this)">
                    </div>
                    <script>
                        function validateForm() {
                            // Additional validation logic if needed
                            return true;
                        }

                        function formatarTelefone(input) {
                            // Format telefone as (99) 9 9999-9999
                            let unformatted = input.value.replace(/[^\d]/g, '');
                            if (unformatted.length === 11) {
                                input.value = `(${unformatted.substring(0, 2)}) ${unformatted.substring(2, 3)} ${unformatted.substring(3, 7)}-${unformatted.substring(7)}`;
                            }
                        }
                    </script>


                    <input type="submit" id="btn-submit" value="Enviar">
                </div>
            </form>
        </div>
        <div class="icon-container">
            <a href="https://wa.me/message/LL3NLMNAPYGOI1"><img src="img/icone_whatsapp.png" alt="Ícone 1" width="45"></a>
            <a href="mailto:arthur.nobrega@polybalas.com"><img src="img/icone_email.png" alt="ícone 2" width="45"></a>
        </div>
    </div>

    <script src="js/formulario.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Adiciona um ouvinte de evento para o envio do formulário
            document.getElementById('formulario_registro').addEventListener('submit', function () {
                // Obtém a data e hora atual no fuso horário de Brasília
                var dataHoraAtualBrasilia = new Date().toLocaleString('en-US', { timeZone: 'America/Sao_Paulo' });
                
                // Cria campos ocultos para armazenar a data e hora de envio
                var inputDataHora = document.createElement('input');
                inputDataHora.type = 'hidden';
                inputDataHora.name = 'dataHoraEnvio';
                inputDataHora.value = dataHoraAtualBrasilia;
    
                // Adiciona os campos ocultos ao formulário
                this.appendChild(inputDataHora);
            });
        });
    </script>
</body>

</html>
